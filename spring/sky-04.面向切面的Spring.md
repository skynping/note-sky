----

**<span style="color:blue">本章内容</span>**

- 面向切面编程的基本原理
- 通过POJO创建切面
- 使用@AspectJ注解
- 为AspectJ切面注入依赖

---



[TOC]

## 1. 什么是切面编程

横切关注点可以被模块化为特殊的类，这些类被称为**切面**。



### 1.1 定义AOP术语

- **通知**：切面的工作
  - **前置通知**：在目标方法被调用前调用通知功能
  - **后置通知**：在目标方法被调用后调用通知功能，此时不关心方法的输出是什么
  - **返回通知**：在目标方法被调用成功后调用通知
  - **异常通知**：在目标方法抛出异常后调用通知
  - **环绕通知**：通知包裹了被通知的方法，在被通知的方法调用之前和调用之后执行自定义的行为

- 连接点

- 切点

- 切面

- 引入

- 织入

  

### 1.2 spring对AOP的支持

spring提供了4种类型的AOp支持：

- 基于代理的经典Spring AOP

- 纯POJO切面

- **@AspectJ注解驱动的切面**

- **注入式AspectJ切面**

  

### 1.3 AspectJ切点表达式

| AspectJ指示器 | 描述                                                         |
| ------------- | ------------------------------------------------------------ |
| arg()         | 限制连接点匹配参数为指定类型的执行方法                       |
| @args()       | 限制连接点匹配参数由指定注解标注的执行方法                   |
| execution()   | 用于匹配是连接点的执行方法                                   |
| this()        | 限制连接点匹配AOP代理的bean引用为指定类型的类                |
| target        | 限制连接点匹配目标对象为指定类型的类                         |
| @target()     | 限制连接点匹配特定的执行的对象，这些对象对应的类要具有指定类型的注解 |
| within        | 限制连接点匹配指定的类型                                     |
| @within()     | 限制连接点匹配指定注解所标注的类型                           |
| @annotation   | 限定匹配带有指定注释的连接点                                 |



